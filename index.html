<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#0f172a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>PCR | Espaço Beleza</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Lato:wght@300;400;700;900&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/js/all.min.js" crossorigin="anonymous" defer></script>
    
    <style>
        :root {
            --primary: #0f172a;
            --primary-light: #1e293b;
            --accent: #c0a062;
            --accent-light: #f7f1e8;
            --accent-dark: #9a7d42;
            --bg-body: #f1f5f9;
            --surface: #ffffff;
            --text-main: #1e293b;
            --text-light: #64748b;
            --text-muted: #94a3b8;
            --border: #e2e8f0;
            --success: #10b981;
            --error: #ef4444;
            --warning: #f59e0b;
            --female-color: #be185d; --female-bg: #fdf2f8; --female-border: #fbcfe8;
            --male-color: #0369a1;  --male-bg:  #f0f9ff;  --male-border:  #bae6fd;
            --radius: 16px;
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.08), 0 1px 2px rgba(0,0,0,0.04);
            --shadow: 0 10px 25px -5px rgba(0,0,0,0.1), 0 4px 10px -3px rgba(0,0,0,0.05);
            --shadow-lg: 0 25px 50px -12px rgba(0,0,0,0.2);
            --safe-bottom: env(safe-area-inset-bottom, 20px);
            --sidebar-width: 280px;
            --anim: cubic-bezier(0.4, 0, 0.2, 1);
            --spring: cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        *, *::before, *::after {
            margin: 0; padding: 0; box-sizing: border-box;
            outline: none; -webkit-tap-highlight-color: transparent;
            font-family: 'Lato', sans-serif;
            word-wrap: break-word; overflow-wrap: break-word;
        }

        body { background: var(--bg-body); color: var(--text-main); min-height: 100vh; }

        /* ===================== LAYOUT ===================== */
        .app-shell { width: 100%; min-height: 100vh; background: var(--bg-body); display: flex; flex-direction: column; }

        @media (min-width: 1024px) {
            .app-shell { flex-direction: row; }
            .content-area { padding: 40px !important; }
            .mobile-nav { display: none !important; }
            .desktop-sidebar { display: flex !important; }
            .mobile-header { display: none !important; }
            .responsive-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        }

        .content-area { flex: 1; padding: 20px; padding-bottom: calc(110px + var(--safe-bottom)); overflow-x: hidden; }

        .desktop-sidebar {
            display: none;
            width: var(--sidebar-width);
            background: var(--primary);
            color: white;
            flex-direction: column;
            padding: 36px 22px;
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
        }

        .mobile-nav {
            position: fixed; bottom: 0; width: 100%;
            background: rgba(255,255,255,0.97); backdrop-filter: blur(20px);
            display: flex; justify-content: space-around;
            padding: 12px 0 calc(12px + var(--safe-bottom)) 0;
            border-top: 1px solid var(--border); z-index: 100;
            box-shadow: 0 -8px 30px rgba(0,0,0,0.06);
        }

        .mobile-header {
            padding: 16px 22px;
            padding-top: max(16px, env(safe-area-inset-top));
            background: white;
            display: flex; justify-content: space-between; align-items: center;
            position: sticky; top: 0; z-index: 50;
            border-bottom: 1px solid var(--border);
            box-shadow: 0 2px 12px rgba(0,0,0,0.04);
        }

        /* ===================== TYPOGRAPHY ===================== */
        h1, h2, h3, h4 { font-family: 'Cinzel', serif; font-weight: 700; color: var(--primary); line-height: 1.2; }

        /* ===================== UTILITIES ===================== */
        .hidden { display: none !important; }
        .fade-in { animation: fadeIn 0.45s var(--anim) forwards; }
        .slide-up { animation: slideUp 0.4s var(--anim) forwards; }
        .scale-in { animation: scaleIn 0.35s var(--spring) forwards; }
        .shake { animation: shake 0.4s ease; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(12px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes scaleIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 20%, 60% { transform: translateX(-6px); } 40%, 80% { transform: translateX(6px); } }
        @keyframes shimmer { 0% { background-position: -300px 0; } 100% { background-position: 300px 0; } }
        @keyframes spin { to { transform: rotate(360deg); } }
        @keyframes popIn { 0% { transform: scale(0.8); opacity: 0; } 70% { transform: scale(1.05); } 100% { transform: scale(1); opacity: 1; } }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-6px); } }

        /* ===================== COMPONENTS ===================== */
        .logo-img { height: 45px; width: auto; object-fit: contain; }
        .logo-fallback { font-family: 'Cinzel'; font-weight: 700; color: var(--accent); font-size: 1.8rem; display: none; }

        .avatar-box {
            width: 50px; height: 50px; border-radius: 14px;
            background: linear-gradient(135deg, var(--accent), #9a7d42);
            color: white; font-family: 'Cinzel'; font-weight: 700;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 4px 12px rgba(192, 160, 98, 0.35);
            flex-shrink: 0; font-size: 1rem; letter-spacing: 0.5px;
        }
        .avatar-box.large  { width: 88px; height: 88px; font-size: 2rem; border-radius: 24px; margin: 0 auto 18px; box-shadow: 0 8px 24px rgba(192,160,98,0.4); }
        .avatar-box.small  { width: 40px; height: 40px; font-size: 0.85rem; border-radius: 10px; }
        .avatar-box.xsmall { width: 32px; height: 32px; font-size: 0.75rem; border-radius: 8px; }

        /* BUTTONS */
        .btn-action {
            background: var(--primary); color: white; border: none;
            width: 100%; border-radius: 14px; height: 54px;
            display: flex; justify-content: center; align-items: center;
            gap: 10px; font-weight: 800; cursor: pointer; transition: all 0.25s var(--anim);
            letter-spacing: 1.5px; text-transform: uppercase; font-size: 0.82rem;
            position: relative; overflow: hidden; white-space: nowrap;
        }
        .btn-action::after {
            content: ''; position: absolute; inset: 0;
            background: linear-gradient(135deg, transparent 40%, rgba(255,255,255,0.08));
        }
        .btn-action:hover:not(:disabled) { background: var(--accent-dark); transform: translateY(-2px); box-shadow: 0 8px 20px rgba(192,160,98,0.35); }
        .btn-action:active:not(:disabled) { transform: scale(0.97); }
        .btn-action:disabled { opacity: 0.65; cursor: not-allowed; transform: none; }
        .btn-action.accent { background: var(--accent); color: var(--primary); }
        .btn-action.accent:hover:not(:disabled) { background: var(--accent-dark); color: white; }
        .btn-action.danger { background: var(--error); }
        .btn-action.danger:hover:not(:disabled) { background: #dc2626; box-shadow: 0 8px 20px rgba(239,68,68,0.3); }

        .btn-ghost {
            background: white; border: 1.5px solid var(--border);
            color: var(--text-main); padding: 10px 18px; border-radius: 12px;
            font-size: 0.85rem; cursor: pointer;
            display: inline-flex; align-items: center; gap: 8px;
            font-weight: 700; transition: all 0.2s;
        }
        .btn-ghost:hover { border-color: var(--accent); color: var(--accent); background: var(--accent-light); }
        .btn-ghost:active { transform: scale(0.97); }

        .btn-icon {
            width: 42px; height: 42px; border-radius: 12px; border: 1.5px solid var(--border);
            background: white; color: var(--text-light); display: flex; align-items: center;
            justify-content: center; cursor: pointer; transition: all 0.2s; flex-shrink: 0;
        }
        .btn-icon:hover { border-color: var(--accent); color: var(--accent); background: var(--accent-light); }
        .btn-icon.danger:hover { border-color: var(--error); color: var(--error); background: #fee2e2; }

        /* SPINNER */
        .spinner {
            width: 18px; height: 18px; border: 2.5px solid rgba(255,255,255,0.35);
            border-top-color: white; border-radius: 50%; animation: spin 0.7s linear infinite;
        }
        .spinner.dark {
            border-color: rgba(15,23,42,0.2); border-top-color: var(--primary);
        }

        /* INPUTS */
        .input-box {
            width: 100%; padding: 15px 18px; margin-bottom: 14px;
            border: 1.5px solid var(--border); border-radius: 14px;
            background: #fcfcfc; font-size: 0.95rem; transition: all 0.25s;
            color: var(--text-main);
        }
        .input-box:focus { border-color: var(--accent); background: white; box-shadow: 0 0 0 4px var(--accent-light); }
        .input-box.error { border-color: var(--error); box-shadow: 0 0 0 4px rgba(239,68,68,0.08); }
        .input-box::placeholder { color: var(--text-muted); }
        .field-error { color: var(--error); font-size: 0.78rem; font-weight: 700; margin-top: -10px; margin-bottom: 12px; display: none; }
        .field-error.show { display: block; animation: fadeIn 0.2s; }

        /* CARDS */
        .card {
            background: var(--surface); padding: 26px;
            border-radius: var(--radius); box-shadow: var(--shadow);
            margin-bottom: 24px; border: 1px solid rgba(255,255,255,0.9);
        }
        .card-dark {
            background: linear-gradient(145deg, var(--primary) 0%, #1a2744 100%);
            border: 1px solid rgba(255,255,255,0.05);
        }

        /* PROF CARD */
        .prof-card {
            background: white; border-radius: 18px; padding: 20px;
            margin-bottom: 14px; border: 1.5px solid #f1f5f9;
            display: flex; align-items: center; gap: 16px;
            cursor: pointer; transition: all 0.3s var(--anim);
            box-shadow: var(--shadow-sm); position: relative; overflow: hidden;
        }
        .prof-card::before {
            content: ''; position: absolute; left: 0; top: 0; bottom: 0;
            width: 5px; background: linear-gradient(to bottom, var(--accent), var(--accent-dark));
        }
        .prof-card:hover { transform: translateY(-4px); box-shadow: var(--shadow); border-color: var(--accent-light); }
        .prof-card:hover .prof-arrow { transform: translateX(5px); color: var(--accent); }
        .prof-arrow { transition: all 0.3s; color: var(--text-muted); }

        /* BOOKING TICKET */
        .bk-ticket {
            background: white; border-radius: 16px; padding: 18px 20px;
            margin-bottom: 10px; box-shadow: var(--shadow-sm);
            border: 1.5px solid #f1f5f9;
            display: flex; justify-content: space-between;
            align-items: center; transition: all 0.25s; gap: 12px;
        }
        .bk-ticket:hover { box-shadow: var(--shadow); border-color: var(--border); }
        .bk-bar { width: 4px; min-height: 50px; border-radius: 10px; margin-right: 14px; flex-shrink: 0; }

        .bk-time-badge {
            display: inline-flex; align-items: center; gap: 6px;
            background: var(--primary); color: var(--accent);
            font-weight: 800; font-family: 'Cinzel'; padding: 5px 12px;
            border-radius: 8px; font-size: 0.85rem; margin-bottom: 7px;
        }

        /* TIME GRID */
        .time-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(82px, 1fr)); gap: 10px; margin-top: 18px; }

        .time-slot {
            padding: 14px 5px; text-align: center; border-radius: 12px;
            background: white; border: 1.5px solid #f1f5f9;
            font-size: 0.9rem; cursor: pointer; transition: all 0.2s var(--spring);
            color: var(--text-main); font-weight: 700;
            animation: scaleIn 0.3s var(--spring) both;
        }
        .time-slot:hover { border-color: var(--accent); color: var(--accent); background: var(--accent-light); transform: translateY(-2px); }
        .time-slot.selected {
            background: var(--primary); color: var(--accent);
            border-color: var(--primary); transform: scale(1.06);
            box-shadow: 0 6px 16px rgba(15,23,42,0.25);
        }
        .time-slot.blocked-female { background: var(--female-bg); color: var(--female-color); border-color: var(--female-border); cursor: not-allowed; font-size: 0.68rem; }
        .time-slot.blocked-male   { background: var(--male-bg);   color: var(--male-color);   border-color: var(--male-border);   cursor: not-allowed; font-size: 0.68rem; }
        .time-slot.blocked-prof   { background: #f1f5f9; color: var(--text-muted); cursor: not-allowed; border-color: transparent; }
        .time-slot.blocked-prof span { text-decoration: line-through; }
        .time-slot.blocked-maca   { background: #fffbeb; color: var(--warning); border-color: #fde68a; cursor: not-allowed; font-size: 0.68rem; }

        .slot-legend { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 16px; }
        .legend-item { display: flex; align-items: center; gap: 6px; font-size: 0.75rem; font-weight: 700; color: var(--text-light); }
        .legend-dot { width: 10px; height: 10px; border-radius: 50%; }

        /* STEP INDICATOR */
        .step-indicator {
            display: flex; align-items: center; justify-content: center;
            gap: 0; margin-bottom: 28px;
        }
        .step-dot {
            width: 36px; height: 36px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-weight: 800; font-size: 0.85rem; transition: all 0.3s;
            border: 2px solid transparent;
        }
        .step-dot.done  { background: var(--success);    color: white; }
        .step-dot.active{ background: var(--primary);    color: var(--accent); border-color: var(--accent); }
        .step-dot.idle  { background: var(--bg-body);    color: var(--text-muted); border-color: var(--border); }
        .step-line { flex: 1; max-width: 60px; height: 2px; background: var(--border); margin: 0 4px; transition: background 0.3s; }
        .step-line.done { background: var(--success); }
        .step-label { font-size: 0.68rem; font-weight: 800; text-transform: uppercase; letter-spacing: 0.5px; color: var(--text-muted); margin-top: 4px; }

        /* CONFIRM STEP */
        .confirm-card {
            background: var(--bg-body); border-radius: 18px;
            padding: 22px; margin: 20px 0;
            border: 1.5px solid var(--border);
        }
        .confirm-row {
            display: flex; justify-content: space-between; align-items: center;
            padding: 12px 0; border-bottom: 1px solid var(--border);
        }
        .confirm-row:last-child { border-bottom: none; }
        .confirm-label { font-size: 0.78rem; font-weight: 800; text-transform: uppercase; color: var(--text-muted); letter-spacing: 0.5px; }
        .confirm-value { font-weight: 700; color: var(--primary); font-size: 0.95rem; text-align: right; }

        /* EMPTY STATE */
        .empty-state {
            text-align: center; padding: 48px 20px;
            color: var(--text-muted);
        }
        .empty-icon {
            width: 72px; height: 72px; background: var(--bg-body);
            border-radius: 20px; display: flex; align-items: center; justify-content: center;
            margin: 0 auto 18px; animation: float 3s ease-in-out infinite;
        }
        .empty-icon i { font-size: 1.8rem; color: var(--text-muted); }
        .empty-state h4 { font-family: 'Cinzel'; font-size: 1rem; color: var(--text-light); margin-bottom: 8px; }
        .empty-state p { font-size: 0.88rem; line-height: 1.6; }

        /* SKELETON */
        .skel {
            background: linear-gradient(90deg, #f0f4f8 25%, #e8edf2 50%, #f0f4f8 75%);
            background-size: 300px 100%;
            animation: shimmer 1.4s infinite linear;
            border-radius: 10px;
        }
        .skel-card { height: 82px; border-radius: 18px; margin-bottom: 14px; }
        .skel-ticket { height: 78px; border-radius: 16px; margin-bottom: 10px; }
        .skel-row { height: 18px; margin-bottom: 10px; border-radius: 8px; }

        /* TOAST */
        #toast {
            position: fixed; top: 28px; left: 50%; transform: translateX(-50%);
            padding: 14px 28px; border-radius: 50px; z-index: 9999;
            display: none; box-shadow: var(--shadow-lg); font-weight: 800;
            gap: 10px; align-items: center; font-size: 0.9rem; white-space: nowrap;
            border: 1px solid transparent; min-width: 200px; justify-content: center;
            transition: all 0.3s;
        }
        #toast.success { background: var(--success); color: white; border-color: rgba(255,255,255,0.2); }
        #toast.error   { background: var(--error);   color: white; border-color: rgba(255,255,255,0.2); }
        #toast.info    { background: var(--primary);  color: white; border-color: var(--accent); }
        #toast.warning { background: var(--warning);  color: white; border-color: rgba(255,255,255,0.2); }

        /* MODAL */
        .modal-overlay {
            position: fixed; inset: 0;
            background: rgba(15, 23, 42, 0.75);
            z-index: 2000; display: none; align-items: flex-end;
            justify-content: center; backdrop-filter: blur(8px); padding: 0;
        }
        @media (min-width: 640px) { .modal-overlay { align-items: center; padding: 20px; } }

        .modal-box {
            background: white; padding: 32px 28px;
            border-radius: 28px 28px 0 0;
            width: 100%; max-width: 480px;
            box-shadow: var(--shadow-lg);
            animation: slideUp 0.35s var(--spring);
            max-height: 92vh; overflow-y: auto;
        }
        @media (min-width: 640px) {
            .modal-box { border-radius: 24px; animation: scaleIn 0.35s var(--spring); }
        }

        .modal-handle {
            width: 40px; height: 4px; background: var(--border);
            border-radius: 99px; margin: 0 auto 24px;
        }
        @media (min-width: 640px) { .modal-handle { display: none; } }

        .modal-title {
            font-family: 'Cinzel'; font-weight: 700; font-size: 1.2rem;
            color: var(--primary); margin-bottom: 22px;
            display: flex; align-items: center; gap: 12px;
        }
        .modal-title i { color: var(--accent); }

        /* SIDEBAR */
        .sidebar-logo { height: 48px; margin-bottom: 44px; display: flex; align-items: center; gap: 14px; }
        .sidebar-item {
            padding: 14px 18px; cursor: pointer; color: #64748b;
            font-weight: 700; display: flex; align-items: center;
            gap: 14px; border-radius: 14px; margin-bottom: 6px; transition: all 0.25s;
            font-size: 0.92rem;
        }
        .sidebar-item:hover { color: white; background: rgba(255,255,255,0.07); }
        .sidebar-item.active { background: var(--accent); color: var(--primary); box-shadow: 0 8px 20px rgba(192,160,98,0.35); }
        .sidebar-item i { width: 18px; text-align: center; }

        .sidebar-user {
            margin-top: auto; padding: 20px;
            background: rgba(255,255,255,0.04);
            border-radius: 18px; border: 1px solid rgba(255,255,255,0.06);
        }

        /* MOBILE NAV */
        .nav-btn {
            color: var(--text-muted); cursor: pointer; transition: all 0.25s;
            display: flex; flex-direction: column; align-items: center; gap: 5px;
            padding: 0 18px;
        }
        .nav-btn i { font-size: 1.35rem; }
        .nav-btn span { font-size: 0.65rem; font-weight: 800; text-transform: uppercase; letter-spacing: 0.5px; }
        .nav-btn.active { color: var(--accent); }
        .nav-btn.active i { transform: scale(1.1); }

        /* TAGS */
        .tag { padding: 4px 10px; border-radius: 8px; font-size: 0.68rem; font-weight: 900; letter-spacing: 1px; text-transform: uppercase; display: inline-block; }
        .tag-f { background: var(--female-bg); color: var(--female-color); }
        .tag-m { background: var(--male-bg);   color: var(--male-color); }
        .tag-role { background: var(--accent-light); color: var(--accent-dark); }
        .tag-success { background: #d1fae5; color: #065f46; }
        .maca-badge { background: #fffbeb; color: var(--warning); padding: 2px 8px; border-radius: 6px; font-size: 0.68rem; font-weight: 900; letter-spacing: 0.5px; margin-left: 6px; }

        /* EDIT BTN */
        .edit-btn { cursor: pointer; color: var(--accent); transition: all 0.2s; margin-left: 8px; font-size: 0.85rem; }
        .edit-btn:hover { transform: rotate(15deg) scale(1.2); }

        /* NOTIFICATION BELL */
        .notif-btn {
            width: 38px; height: 38px; border-radius: 10px; background: var(--bg-body);
            border: 1px solid var(--border); display: flex; align-items: center;
            justify-content: center; cursor: pointer; position: relative; color: var(--text-light);
        }
        .notif-dot {
            position: absolute; top: 6px; right: 6px; width: 8px; height: 8px;
            background: var(--error); border-radius: 50%; border: 1.5px solid white;
        }

        /* SECTION HEADER */
        .section-header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 20px; gap: 12px;
        }
        .section-header h3 { font-size: 1.05rem; }

        /* STAT PILLS */
        .stats-row { display: flex; gap: 12px; margin-bottom: 24px; overflow-x: auto; padding-bottom: 4px; }
        .stat-pill {
            flex-shrink: 0; background: white; border-radius: 14px;
            padding: 14px 18px; border: 1px solid var(--border);
            box-shadow: var(--shadow-sm);
        }
        .stat-pill .val { font-family: 'Cinzel'; font-size: 1.6rem; font-weight: 700; color: var(--primary); line-height: 1; }
        .stat-pill .lbl { font-size: 0.72rem; font-weight: 800; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-top: 4px; }

        /* BLOCK MANAGEMENT */
        .block-tag {
            display: inline-flex; align-items: center; gap: 6px;
            padding: 5px 12px; background: #f1f5f9; border-radius: 8px;
            margin: 3px; font-size: 0.82rem; font-weight: 700; color: var(--text-light);
            cursor: pointer; transition: all 0.2s; border: 1px solid var(--border);
        }
        .block-tag:hover { background: #fee2e2; color: var(--error); border-color: #fecaca; }
        .block-tag i { font-size: 0.7rem; }

        /* GENERAL CALENDAR */
        .timeline-row {
            display: flex; align-items: center; padding: 16px 0;
            border-bottom: 1px solid #f8fafc; gap: 16px; transition: background 0.2s;
        }
        .timeline-row:last-child { border-bottom: none; }
        .timeline-time {
            width: 70px; font-weight: 800; color: var(--primary);
            font-family: 'Cinzel'; font-size: 0.9rem; flex-shrink: 0;
        }
        .timeline-content { flex: 1; display: flex; flex-wrap: wrap; gap: 6px; }

        /* PROF AGENDA */
        .date-badge {
            display: inline-block; padding: 3px 10px; background: var(--primary);
            color: var(--accent); border-radius: 8px; font-size: 0.75rem;
            font-family: 'Cinzel'; font-weight: 700;
        }

        /* SEARCH */
        .search-wrap { position: relative; margin-bottom: 16px; }
        .search-wrap .input-box { padding-left: 44px; margin-bottom: 0; }
        .search-icon { position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: var(--text-muted); pointer-events: none; }

        /* ADMIN USER LIST */
        .admin-user-item {
            padding: 16px; border-bottom: 1px solid #f8fafc;
            display: flex; justify-content: space-between; align-items: center; gap: 12px;
            transition: background 0.2s;
        }
        .admin-user-item:hover { background: #fafbfc; }
        .admin-user-item:last-child { border-bottom: none; }
        .admin-list-wrap { max-height: 480px; overflow-y: auto; background: white; border-radius: 16px; border: 1px solid var(--border); box-shadow: var(--shadow-sm); }

        /* HISTORY TOGGLE */
        .history-section { margin-top: 20px; }
        .history-toggle {
            width: 100%; padding: 12px; border-radius: 12px; border: 1.5px dashed var(--border);
            background: transparent; color: var(--text-light); font-weight: 700;
            cursor: pointer; text-align: center; font-size: 0.85rem; transition: all 0.2s;
        }
        .history-toggle:hover { border-color: var(--accent); color: var(--accent); background: var(--accent-light); }

        /* SCROLLBAR */
        ::-webkit-scrollbar { width: 5px; height: 5px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 99px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--accent); }
    </style>
</head>
<body>

<!-- ============================================================
     TOAST
============================================================ -->
<div id="toast">
    <i id="toast-icon" class="fa-solid fa-check-circle"></i>
    <span id="toast-msg">Notificação</span>
</div>

<!-- ============================================================
     MODAL: AVISO
============================================================ -->
<div id="modal-alert" class="modal-overlay">
    <div class="modal-box">
        <div class="modal-handle"></div>
        <div style="text-align:center; padding: 8px 0 10px">
            <div style="width:76px;height:76px;background:var(--accent-light);border-radius:24px;display:inline-flex;align-items:center;justify-content:center;margin-bottom:22px;animation:popIn 0.5s var(--spring)">
                <i class="fa-solid fa-bell-ring" style="font-size:1.8rem;color:var(--accent)"></i>
            </div>
            <h3 style="margin-bottom:14px;font-size:1.3rem">Aviso Importante</h3>
            <p id="alert-msg" style="color:var(--text-light);margin-bottom:28px;line-height:1.7;font-size:1rem">...</p>
            <button class="btn-action" onclick="document.getElementById('modal-alert').style.display='none'" style="max-width:280px;margin:0 auto">
                <i class="fa-solid fa-check"></i> Entendido
            </button>
        </div>
    </div>
</div>

<!-- ============================================================
     MODAL: CANCELAR RESERVA
============================================================ -->
<div id="modal-cancel" class="modal-overlay">
    <div class="modal-box">
        <div class="modal-handle"></div>
        <div class="modal-title" style="color:var(--error)">
            <div style="width:44px;height:44px;background:#fee2e2;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0">
                <i class="fa-solid fa-triangle-exclamation" style="color:var(--error)"></i>
            </div>
            Cancelar Reserva?
        </div>
        <p style="color:var(--text-light);margin-bottom:20px;line-height:1.6;font-size:0.95rem">Esta ação não pode ser desfeita. O cliente será notificado. Informe o motivo:</p>
        <label style="font-size:0.78rem;font-weight:800;color:var(--text-muted);text-transform:uppercase;letter-spacing:0.5px;display:block;margin-bottom:8px">Motivo do Cancelamento</label>
        <input type="text" id="cancel-reason" class="input-box" placeholder="Ex: Profissional indisponível...">
        <div style="display:flex;gap:12px;margin-top:8px">
            <button class="btn-action danger" id="btn-cancel-confirm" onclick="finalizeCancel()">
                <i class="fa-solid fa-trash-can"></i> Confirmar Cancelamento
            </button>
            <button class="btn-ghost" style="flex-shrink:0;white-space:nowrap" onclick="closeCancelModal()">
                <i class="fa-solid fa-arrow-left"></i> Voltar
            </button>
        </div>
    </div>
</div>

<!-- ============================================================
     MODAL: EDITAR PERFIL
============================================================ -->
<div id="modal-profile" class="modal-overlay">
    <div class="modal-box">
        <div class="modal-handle"></div>
        <div class="modal-title">
            <div style="width:44px;height:44px;background:var(--accent-light);border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0">
                <i class="fa-solid fa-user-gear" style="color:var(--accent)"></i>
            </div>
            Editar Meu Perfil
        </div>

        <label class="input-label">Nome Completo</label>
        <input type="text" id="prof-name" class="input-box" placeholder="Seu nome completo">

        <label class="input-label">E-mail de Acesso</label>
        <input type="email" id="prof-email" class="input-box" placeholder="email@exemplo.com">

        <label class="input-label">Sua Unidade</label>
        <input type="text" id="prof-unit" class="input-box" placeholder="Ex: 101, Externo...">

        <label id="label-prof-desc" class="input-label">Especialidade / Descrição</label>
        <input type="text" id="prof-desc" class="input-box" placeholder="Ex: Massagista, Manicure...">

        <label class="input-label">Nova Senha <span style="color:var(--text-muted);font-weight:400;text-transform:none">(deixe vazio para manter)</span></label>
        <input type="password" id="prof-pass" class="input-box" placeholder="••••••••">

        <div style="display:flex;gap:12px;margin-top:18px">
            <button class="btn-action" id="btn-save-profile" onclick="saveProfile()">
                <i class="fa-solid fa-floppy-disk"></i> Salvar Dados
            </button>
            <button class="btn-ghost" style="flex-shrink:0" onclick="document.getElementById('modal-profile').style.display='none'">
                Sair
            </button>
        </div>
    </div>
</div>

<!-- ============================================================
     MODAL: ADMIN - GERENCIAR CONTA
============================================================ -->
<div id="modal-admin-user" class="modal-overlay">
    <div class="modal-box">
        <div class="modal-handle"></div>
        <div class="modal-title">
            <div style="width:44px;height:44px;background:var(--accent-light);border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0">
                <i class="fa-solid fa-user-plus" style="color:var(--accent)"></i>
            </div>
            Gerenciar Conta
        </div>
        <input type="hidden" id="adm-uid">
        <div style="display:grid;grid-template-columns:1fr 100px;gap:12px">
            <input type="text"  id="adm-name" class="input-box" placeholder="Nome Completo">
            <input type="text"  id="adm-unit" class="input-box" placeholder="Unid.">
        </div>
        <input type="email"    id="adm-email" class="input-box" placeholder="E-mail de acesso">
        <input type="password" id="adm-pass"  class="input-box" placeholder="Senha">
        <input type="text"     id="adm-desc"  class="input-box" placeholder="Especialidade (Opcional)">
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:14px">
            <select id="adm-role"   class="input-box" style="margin-bottom:0">
                <option value="morador">Morador</option>
                <option value="prof">Profissional</option>
                <option value="admin">Administrador</option>
            </select>
            <select id="adm-gender" class="input-box" style="margin-bottom:0">
                <option value="M">Masculino</option>
                <option value="F">Feminino</option>
            </select>
        </div>
        <div style="display:flex;align-items:center;gap:14px;margin-bottom:26px;background:var(--bg-body);padding:14px 18px;border-radius:14px;border:1.5px solid var(--border)">
            <input type="checkbox" id="adm-maca" style="width:20px;height:20px;cursor:pointer;accent-color:var(--accent)">
            <label for="adm-maca" style="font-weight:700;font-size:0.95rem;cursor:pointer">
                <i class="fa-solid fa-bed" style="color:var(--accent);margin-right:6px"></i>
                Usa Sala com Maca?
            </label>
        </div>
        <div style="display:flex;gap:12px">
            <button class="btn-action" id="btn-admin-save-user" onclick="adminSaveUser()">
                <i class="fa-solid fa-floppy-disk"></i> Salvar Usuário
            </button>
            <button class="btn-ghost" style="flex-shrink:0" onclick="document.getElementById('modal-admin-user').style.display='none'">
                Fechar
            </button>
        </div>
    </div>
</div>

<!-- ============================================================
     TELA: AUTH
============================================================ -->
<div id="screen-auth" style="width:100%;min-height:100vh;display:flex;justify-content:center;align-items:center;background:linear-gradient(145deg,#0f172a 0%,#1e293b 60%,#0f172a 100%);padding:20px;position:relative;overflow:hidden">
    <!-- Background decorative elements -->
    <div style="position:absolute;top:-100px;right:-100px;width:400px;height:400px;border-radius:50%;background:radial-gradient(circle,rgba(192,160,98,0.07) 0%,transparent 70%);pointer-events:none"></div>
    <div style="position:absolute;bottom:-80px;left:-80px;width:300px;height:300px;border-radius:50%;background:radial-gradient(circle,rgba(192,160,98,0.05) 0%,transparent 70%);pointer-events:none"></div>

    <div class="card slide-up" style="width:100%;max-width:420px;padding:44px 38px;border:1px solid rgba(255,255,255,0.05);box-shadow:var(--shadow-lg)">
        <div style="text-align:center;margin-bottom:36px">
            <img src="https://kynto.com.br/pcr.png"
                 onerror="this.style.display='none';document.getElementById('login-logo-text').style.display='block'"
                 class="logo-img" style="height:72px;margin-bottom:16px">
            <div id="login-logo-text" class="logo-fallback" style="margin-bottom:10px">PCR</div>
            <p style="letter-spacing:4px;font-size:0.72rem;color:var(--accent);text-transform:uppercase;font-weight:800">Agenda · Espaço Beleza</p>
        </div>

        <div style="display:flex;margin-bottom:28px;background:var(--bg-body);padding:5px;border-radius:16px;gap:4px">
            <div id="tab-login-btn" style="flex:1;padding:12px;text-align:center;border-radius:12px;font-weight:800;cursor:pointer;background:white;color:var(--primary);box-shadow:var(--shadow-sm);transition:all 0.25s;font-size:0.85rem;letter-spacing:0.5px" onclick="toggleAuth('login')">ENTRAR</div>
            <div id="tab-reg-btn"   style="flex:1;padding:12px;text-align:center;border-radius:12px;cursor:pointer;color:var(--text-muted);font-weight:800;transition:all 0.25s;font-size:0.85rem;letter-spacing:0.5px" onclick="toggleAuth('reg')">CADASTRAR</div>
        </div>

        <div id="form-login">
            <div style="position:relative">
                <i class="fa-solid fa-envelope" style="position:absolute;left:16px;top:50%;transform:translateY(-50%);color:var(--text-muted);pointer-events:none"></i>
                <input type="email" id="login-email" class="input-box" placeholder="E-mail" style="padding-left:44px" onkeydown="if(event.key==='Enter')document.getElementById('login-pass').focus()">
            </div>
            <div style="position:relative">
                <i class="fa-solid fa-lock" style="position:absolute;left:16px;top:50%;transform:translateY(-50%);color:var(--text-muted);pointer-events:none"></i>
                <input type="password" id="login-pass" class="input-box" placeholder="Senha" style="padding-left:44px" onkeydown="if(event.key==='Enter')login()">
            </div>
            <button class="btn-action" id="btn-login" onclick="login()">
                <i class="fa-solid fa-right-to-bracket"></i> Acessar Agenda
            </button>
        </div>

        <div id="form-reg" class="hidden">
            <input type="text"     id="reg-name"   class="input-box" placeholder="Nome Completo">
            <input type="text"     id="reg-unit"   class="input-box" placeholder="Unidade (Ex: 101)">
            <select                id="reg-gender" class="input-box" style="color:var(--text-main)">
                <option value="" disabled selected style="color:var(--text-muted)">Selecione o Gênero</option>
                <option value="M">Masculino</option>
                <option value="F">Feminino</option>
            </select>
            <input type="email"    id="reg-email"  class="input-box" placeholder="E-mail">
            <input type="password" id="reg-pass"   class="input-box" placeholder="Crie sua senha">
            <button class="btn-action" id="btn-register" onclick="register()">
                <i class="fa-solid fa-user-plus"></i> Finalizar Cadastro
            </button>
        </div>
    </div>
</div>

<!-- ============================================================
     TELA: APP
============================================================ -->
<div id="screen-app" class="app-shell hidden">

    <!-- SIDEBAR DESKTOP -->
    <aside class="desktop-sidebar">
        <div class="sidebar-logo">
            <img src="https://kynto.com.br/pcr.png"
                 onerror="this.style.display='none';document.getElementById('pc-logo-text').style.display='block'"
                 class="logo-img" style="height:46px">
            <div id="pc-logo-text" class="logo-fallback" style="font-size:1.6rem">PCR</div>
        </div>

        <div class="sidebar-item active" id="sb-home" onclick="switchTab('home')">
            <i class="fa-solid fa-house-chimney"></i> Início
        </div>
        <div class="sidebar-item" id="sb-cal" onclick="switchTab('calendar')">
            <i class="fa-solid fa-calendar-days"></i> Agenda Geral
        </div>

        <div class="sidebar-user">
            <div style="display:flex;align-items:center;gap:12px;margin-bottom:16px">
                <div id="pc-avatar" class="avatar-box small"></div>
                <div style="overflow:hidden;min-width:0">
                    <div style="font-weight:800;font-size:0.9rem;color:white;white-space:nowrap;text-overflow:ellipsis;overflow:hidden">
                        <span id="pc-user-name">User</span>
                        <i class="fa-solid fa-pen-to-square edit-btn" onclick="openProfile()" title="Editar Perfil"></i>
                    </div>
                    <small style="color:var(--accent);font-weight:700" id="pc-user-unit">Unit</small>
                </div>
            </div>
            <div class="sidebar-item" onclick="logout()" style="color:#ef4444;margin:0;padding:10px 14px;font-size:0.85rem">
                <i class="fa-solid fa-right-from-bracket"></i> Sair da Conta
            </div>
        </div>
    </aside>

    <!-- CONTENT AREA -->
    <div class="content-area">

        <!-- MOBILE HEADER -->
        <div class="mobile-header">
            <div style="display:flex;align-items:center;gap:10px">
                <img src="https://kynto.com.br/pcr.png"
                     onerror="this.style.display='none';document.getElementById('mob-logo-text').style.display='block'"
                     class="logo-img" style="height:32px">
                <div id="mob-logo-text" class="logo-fallback" style="font-size:1.2rem;color:var(--primary)">PCR</div>
            </div>
            <div style="display:flex;align-items:center;gap:10px">
                <div style="text-align:right">
                    <div style="font-weight:800;font-size:0.88rem;line-height:1.3">
                        <span id="user-name">User</span>
                        <i class="fa-solid fa-pen-to-square edit-btn" onclick="openProfile()"></i>
                    </div>
                    <div style="display:flex;align-items:center;justify-content:flex-end;gap:5px;margin-top:2px">
                        <small style="color:var(--text-light);font-size:0.75rem" id="user-unit">Unit</small>
                        <span id="gender-badge" class="tag"></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== TAB: HOME ===== -->
        <div id="tab-home" class="fade-in">

            <!-- VIEW: MORADOR -->
            <div id="view-morador" class="hidden">
                <!-- STEP 1: Lista de Profissionais + Minhas Reservas -->
                <div id="step-prof">
                    <div class="responsive-grid">
                        <div>
                            <div class="section-header">
                                <h3><i class="fa-solid fa-star" style="color:var(--accent);margin-right:8px"></i>Profissionais</h3>
                            </div>
                            <div id="list-profs"></div>
                        </div>
                        <div>
                            <div class="section-header">
                                <h3><i class="fa-solid fa-calendar-check" style="color:var(--accent);margin-right:8px"></i>Minhas Reservas</h3>
                            </div>
                            <div id="my-bookings-active"></div>
                            <div class="history-section">
                                <button class="history-toggle" onclick="toggleHistory('morador')">
                                    <i class="fa-solid fa-clock-rotate-left" style="margin-right:6px"></i> Ver Histórico
                                </button>
                                <div id="my-bookings-history" class="hidden" style="margin-top:12px"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- STEP 2: Selecionar Horário -->
                <div id="step-time" class="hidden fade-in" style="max-width:720px;margin:0 auto">
                    <button class="btn-ghost" style="margin-bottom:24px" onclick="backToProfs()">
                        <i class="fa-solid fa-chevron-left"></i> Voltar
                    </button>

                    <!-- Step Indicator -->
                    <div style="display:flex;flex-direction:column;align-items:center;gap:6px;margin-bottom:28px">
                        <div class="step-indicator">
                            <div style="display:flex;flex-direction:column;align-items:center;gap:4px">
                                <div class="step-dot done"><i class="fa-solid fa-check" style="font-size:0.8rem"></i></div>
                                <span class="step-label">Profissional</span>
                            </div>
                            <div class="step-line done"></div>
                            <div style="display:flex;flex-direction:column;align-items:center;gap:4px">
                                <div class="step-dot active">2</div>
                                <span class="step-label" style="color:var(--primary);font-weight:800">Data & Hora</span>
                            </div>
                            <div class="step-line" id="step-line-2"></div>
                            <div style="display:flex;flex-direction:column;align-items:center;gap:4px">
                                <div class="step-dot idle" id="step3-dot">3</div>
                                <span class="step-label">Confirmar</span>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <!-- Prof Info -->
                        <div style="text-align:center;margin-bottom:28px;padding-bottom:24px;border-bottom:1px solid var(--border)">
                            <div id="sel-prof-avatar" class="avatar-box large"></div>
                            <h2 style="font-size:1.5rem;margin-bottom:6px" id="sel-prof-name">Nome</h2>
                            <p style="color:var(--text-light);font-size:0.92rem" id="sel-prof-desc">Desc</p>
                        </div>

                        <div style="display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-bottom:20px">
                            <div>
                                <label style="font-size:0.72rem;font-weight:800;color:var(--text-muted);text-transform:uppercase;letter-spacing:0.5px;display:block;margin-bottom:8px">
                                    <i class="fa-solid fa-scissors" style="margin-right:4px"></i> Serviço
                                </label>
                                <input type="text" id="booking-desc" class="input-box" placeholder="Ex: Corte de Cabelo" style="margin-bottom:0">
                            </div>
                            <div>
                                <label style="font-size:0.72rem;font-weight:800;color:var(--text-muted);text-transform:uppercase;letter-spacing:0.5px;display:block;margin-bottom:8px">
                                    <i class="fa-solid fa-calendar" style="margin-right:4px"></i> Data
                                </label>
                                <input type="date" id="date-picker" class="input-box" onchange="renderTimeGrid()" style="margin-bottom:0">
                            </div>
                        </div>

                        <div style="background:var(--bg-body);padding:22px;border-radius:16px;border:1px solid var(--border)">
                            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:14px">
                                <div style="font-size:0.72rem;font-weight:900;color:var(--text-muted);letter-spacing:2px;text-transform:uppercase">Horários Disponíveis</div>
                                <div style="font-size:0.72rem;color:var(--text-muted)">Selecione um horário</div>
                            </div>
                            <!-- Legend -->
                            <div class="slot-legend" style="margin-bottom:14px">
                                <div class="legend-item"><div class="legend-dot" style="background:var(--primary)"></div> Disponível</div>
                                <div class="legend-item"><div class="legend-dot" style="background:var(--male-color)"></div> Uso Masc.</div>
                                <div class="legend-item"><div class="legend-dot" style="background:var(--female-color)"></div> Uso Fem.</div>
                                <div class="legend-item"><div class="legend-dot" style="background:#cbd5e1"></div> Bloqueado</div>
                            </div>
                            <div id="grid-slots" class="time-grid"></div>
                        </div>
                    </div>
                </div>

                <!-- STEP 3: Confirmar Agendamento -->
                <div id="step-confirm" class="hidden fade-in" style="max-width:720px;margin:0 auto">
                    <button class="btn-ghost" style="margin-bottom:24px" onclick="backToTime()">
                        <i class="fa-solid fa-chevron-left"></i> Alterar Horário
                    </button>

                    <!-- Step Indicator (step 3 active) -->
                    <div style="display:flex;flex-direction:column;align-items:center;gap:6px;margin-bottom:28px">
                        <div class="step-indicator">
                            <div style="display:flex;flex-direction:column;align-items:center;gap:4px">
                                <div class="step-dot done"><i class="fa-solid fa-check" style="font-size:0.8rem"></i></div>
                                <span class="step-label">Profissional</span>
                            </div>
                            <div class="step-line done"></div>
                            <div style="display:flex;flex-direction:column;align-items:center;gap:4px">
                                <div class="step-dot done"><i class="fa-solid fa-check" style="font-size:0.8rem"></i></div>
                                <span class="step-label">Data & Hora</span>
                            </div>
                            <div class="step-line done"></div>
                            <div style="display:flex;flex-direction:column;align-items:center;gap:4px">
                                <div class="step-dot active">3</div>
                                <span class="step-label" style="color:var(--primary);font-weight:800">Confirmar</span>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div style="text-align:center;margin-bottom:24px">
                            <div style="width:64px;height:64px;background:var(--accent-light);border-radius:20px;display:inline-flex;align-items:center;justify-content:center;margin-bottom:14px;animation:float 3s ease-in-out infinite">
                                <i class="fa-solid fa-calendar-check" style="font-size:1.6rem;color:var(--accent)"></i>
                            </div>
                            <h2 style="font-size:1.4rem;margin-bottom:6px">Confirmar Agendamento</h2>
                            <p style="color:var(--text-light);font-size:0.9rem">Verifique os detalhes antes de confirmar</p>
                        </div>

                        <div class="confirm-card">
                            <div class="confirm-row">
                                <span class="confirm-label"><i class="fa-solid fa-user" style="margin-right:6px"></i>Profissional</span>
                                <span class="confirm-value" id="conf-prof-name">—</span>
                            </div>
                            <div class="confirm-row">
                                <span class="confirm-label"><i class="fa-solid fa-scissors" style="margin-right:6px"></i>Serviço</span>
                                <span class="confirm-value" id="conf-service">—</span>
                            </div>
                            <div class="confirm-row">
                                <span class="confirm-label"><i class="fa-solid fa-calendar" style="margin-right:6px"></i>Data</span>
                                <span class="confirm-value" id="conf-date">—</span>
                            </div>
                            <div class="confirm-row">
                                <span class="confirm-label"><i class="fa-solid fa-clock" style="margin-right:6px"></i>Horário</span>
                                <span class="confirm-value" id="conf-time">—</span>
                            </div>
                            <div class="confirm-row">
                                <span class="confirm-label"><i class="fa-solid fa-building" style="margin-right:6px"></i>Unidade</span>
                                <span class="confirm-value" id="conf-unit">—</span>
                            </div>
                        </div>

                        <button class="btn-action accent" id="btn-confirm-final" onclick="confirmBooking()" style="margin-top:20px">
                            <i class="fa-solid fa-check-circle"></i> Confirmar Agendamento
                        </button>
                    </div>
                </div>
            </div>

            <!-- VIEW: PROFISSIONAL -->
            <div id="view-prof" class="hidden">
                <div class="responsive-grid">
                    <div>
                        <div class="card card-dark">
                            <h3 style="color:var(--accent);margin-bottom:8px;font-size:1.1rem">
                                <i class="fa-solid fa-shield-halved" style="margin-right:8px"></i>Gestão de Horários
                            </h3>
                            <p style="opacity:0.65;font-size:0.88rem;margin-bottom:22px;line-height:1.5">Selecione uma data e bloqueie os horários que não estará disponível.</p>
                            <label style="font-size:0.72rem;font-weight:800;color:rgba(255,255,255,0.4);text-transform:uppercase;letter-spacing:0.5px;display:block;margin-bottom:8px">Selecionar Data</label>
                            <input type="date" id="block-date" class="input-box" style="border:none;height:52px;background:rgba(255,255,255,0.09);color:white;margin-bottom:18px" onchange="renderBlockTimes()">
                            <div id="block-grid" class="time-grid"></div>
                            <button class="btn-action" style="margin-top:22px;background:var(--accent);color:var(--primary)" id="btn-save-block" onclick="saveBlock()">
                                <i class="fa-solid fa-lock"></i> Salvar Bloqueios
                            </button>
                        </div>

                        <div>
                            <div style="font-size:0.72rem;font-weight:900;color:var(--text-muted);text-transform:uppercase;letter-spacing:1.5px;margin-bottom:14px">Bloqueios Ativos</div>
                            <div id="prof-list-blocks"></div>
                        </div>
                    </div>
                    <div>
                        <div class="section-header">
                            <h3><i class="fa-solid fa-calendar-day" style="color:var(--accent);margin-right:8px"></i>Minha Agenda</h3>
                        </div>
                        <div id="prof-list-active"></div>
                        <div class="history-section">
                            <button class="history-toggle" onclick="toggleHistory('prof')">
                                <i class="fa-solid fa-clock-rotate-left" style="margin-right:6px"></i> Ver Histórico
                            </button>
                            <div id="prof-list-history" class="hidden" style="margin-top:12px"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- VIEW: ADMIN -->
            <div id="view-admin" class="hidden">
                <div class="responsive-grid">
                    <div>
                        <div class="section-header">
                            <h3><i class="fa-solid fa-users" style="color:var(--accent);margin-right:8px"></i>Gestão de Pessoas</h3>
                            <button class="btn-action" style="width:auto;padding:0 20px;height:42px;font-size:0.8rem" onclick="adminEditUser(null)">
                                <i class="fa-solid fa-plus"></i> Novo
                            </button>
                        </div>
                        <div class="search-wrap">
                            <i class="fa-solid fa-search search-icon"></i>
                            <input type="text" id="admin-search" class="input-box" placeholder="Procurar por nome ou unidade..." oninput="debounceSearch()">
                        </div>
                        <div id="admin-user-list" class="admin-list-wrap"></div>
                    </div>
                    <div>
                        <div class="section-header">
                            <h3><i class="fa-solid fa-list-check" style="color:var(--accent);margin-right:8px"></i>Todas as Reservas</h3>
                        </div>
                        <div id="admin-list-active"></div>
                        <div class="history-section">
                            <button class="history-toggle" onclick="toggleHistory('admin')">
                                <i class="fa-solid fa-clock-rotate-left" style="margin-right:6px"></i> Ver Histórico
                            </button>
                            <div id="admin-list-history" class="hidden" style="margin-top:12px"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- ===== TAB: AGENDA GERAL ===== -->
        <div id="tab-calendar" class="hidden fade-in">
            <div class="card" style="max-width:900px;margin:0 auto">
                <div style="text-align:center;margin-bottom:30px">
                    <h3 style="font-size:1.6rem;margin-bottom:6px">Agenda Consolidada</h3>
                    <p style="color:var(--text-light);font-size:0.9rem">Visualize a ocupação completa do espaço</p>
                </div>
                <input type="date" id="general-date" class="input-box" style="max-width:280px;margin:0 auto 28px;display:block;text-align:center" onchange="renderGeneralCalendar()">
                <div id="general-timeline" style="border-top:1.5px solid #f8fafc;padding-top:8px"></div>
            </div>
        </div>

    </div><!-- end content-area -->

    <!-- MOBILE NAV -->
    <div class="mobile-nav">
        <div class="nav-btn active" id="mn-home" onclick="switchTab('home')">
            <i class="fa-solid fa-house"></i>
            <span>Início</span>
        </div>
        <div class="nav-btn" id="mn-cal" onclick="switchTab('calendar')">
            <i class="fa-solid fa-calendar-days"></i>
            <span>Agenda</span>
        </div>
        <div class="nav-btn" onclick="logout()">
            <i class="fa-solid fa-right-from-bracket"></i>
            <span>Sair</span>
        </div>
    </div>
</div>

<style>
/* Label style helper (não pode usar classe em <label> normal sem JS, então inline style) */
.input-label {
    font-size: 0.75rem; font-weight: 800; color: var(--text-muted);
    text-transform: uppercase; letter-spacing: 0.5px;
    margin-bottom: 8px; display: block;
}
</style>

<script src="script.js"></script>
</body>
</html>
